# Solver Type æ˜¾ç¤ºé—®é¢˜è¯Šæ–­æŒ‡å—

## ğŸ” é—®é¢˜ç°è±¡

æäº¤ Mechanical ä»»åŠ¡åï¼Œä»»åŠ¡åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„ä»ç„¶æ˜¯ "ğŸ’¡ SPEOS" æ ‡ç­¾ï¼Œè€Œä¸æ˜¯ "ğŸ”§ Mechanical"ã€‚

---

## ğŸ¯ è¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1ï¸âƒ£: æ£€æŸ¥å‰ç«¯æ˜¯å¦æ­£ç¡®æäº¤äº† `solver_type`

#### æ“ä½œæ–¹æ³•

1. æ‰“å¼€æµè§ˆå™¨çš„**å¼€å‘è€…å·¥å…·**ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° **Networkï¼ˆç½‘ç»œï¼‰** æ ‡ç­¾
3. å‹¾é€‰ **Preserve logï¼ˆä¿ç•™æ—¥å¿—ï¼‰**
4. æäº¤ä¸€ä¸ªæ–°çš„ Mechanical ä»»åŠ¡
5. åœ¨ç½‘ç»œè¯·æ±‚åˆ—è¡¨ä¸­ï¼Œæ‰¾åˆ°ä»¥ä¸‹è¯·æ±‚ä¹‹ä¸€ï¼š
   - `POST /api/tasks` ï¼ˆTOS æ¨¡å¼ç®€å•ä¸Šä¼ ï¼‰
   - `POST /api/tasks/submit-direct` ï¼ˆDirect æ¨¡å¼ï¼‰
   - `POST /api/tasks/upload/confirm` ï¼ˆTOS æ¨¡å¼æ–­ç‚¹ç»­ä¼ ï¼‰

6. ç‚¹å‡»è¯¥è¯·æ±‚ï¼ŒæŸ¥çœ‹ **Payloadï¼ˆè¯·æ±‚è´Ÿè½½ï¼‰** æˆ– **Requestï¼ˆè¯·æ±‚ï¼‰** æ ‡ç­¾

#### é¢„æœŸç»“æœ

âœ… **æ­£ç¡®çš„è¯·æ±‚åº”è¯¥åŒ…å«**ï¼š
```
solver_type: "mechanical"
thread_count: "8"
job_key: "wing_001"
```

âŒ **å¦‚æœç¼ºå°‘ `solver_type` æˆ–å€¼ä¸º `"speos"`**ï¼š
- é—®é¢˜åœ¨å‰ç«¯ï¼Œå‰ç«¯æ²¡æœ‰æ­£ç¡®æäº¤
- å¯èƒ½éœ€è¦**æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**å¹¶åˆ·æ–°é¡µé¢

---

### æ­¥éª¤ 2ï¸âƒ£: æ£€æŸ¥åç«¯æ˜¯å¦æ­£ç¡®æ¥æ”¶äº† `solver_type`

#### æ“ä½œæ–¹æ³•

æŸ¥çœ‹åç«¯æ—¥å¿—ï¼ˆworker æˆ– API æ—¥å¿—ï¼‰ï¼Œæœç´¢å…³é”®å­—ï¼š

```bash
# æœç´¢ä»»åŠ¡æ¥æ”¶æ—¥å¿—
grep "Received task" worker.log
# æˆ–
grep "Creating task" api.log
```

#### é¢„æœŸç»“æœ

âœ… **æ­£ç¡®çš„æ—¥å¿—åº”è¯¥æ˜¾ç¤º**ï¼š
```
Received task - Solver: mechanical
Task ID: a339f299-ee95-4074-baf1-b2589fbb5219
```

âŒ **å¦‚æœæ˜¾ç¤ºçš„æ˜¯ `Solver: speos`**ï¼š
- é—®é¢˜åœ¨åç«¯æ¥æ”¶ç¯èŠ‚
- åç«¯å¯èƒ½æ²¡æœ‰æ­£ç¡®è§£æ `solver_type` å‚æ•°

---

### æ­¥éª¤ 3ï¸âƒ£: æ£€æŸ¥åç«¯è¿”å›çš„ä»»åŠ¡åˆ—è¡¨æ˜¯å¦åŒ…å« `solver_type`

#### æ“ä½œæ–¹æ³•

1. æ‰“å¼€æµè§ˆå™¨çš„**å¼€å‘è€…å·¥å…·**ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° **Networkï¼ˆç½‘ç»œï¼‰** æ ‡ç­¾
3. åˆ·æ–°ä»»åŠ¡åˆ—è¡¨é¡µé¢
4. æ‰¾åˆ° `GET /api/tasks?page=1&page_size=10` è¯·æ±‚
5. ç‚¹å‡»è¯¥è¯·æ±‚ï¼ŒæŸ¥çœ‹ **Responseï¼ˆå“åº”ï¼‰** æ ‡ç­¾

#### é¢„æœŸç»“æœ

âœ… **æ­£ç¡®çš„å“åº”åº”è¯¥åŒ…å«**ï¼š
```json
{
  "items": [
    {
      "task_id": "a339f299-ee95-4074-baf1-b2589fbb5219",
      "job_name": "mech-test-01",
      "status": "PENDING",
      "solver_type": "mechanical",  // â¬…ï¸ å…³é”®å­—æ®µ
      "created_at": 1733389501,
      ...
    }
  ]
}
```

âŒ **å¦‚æœ `solver_type` å­—æ®µä¸å­˜åœ¨æˆ–å€¼ä¸º `null`/`"speos"`**ï¼š
- é—®é¢˜åœ¨åç«¯æ•°æ®åº“æˆ–è¿”å›é€»è¾‘
- åç«¯å¯èƒ½æ²¡æœ‰ä¿å­˜ `solver_type` åˆ°æ•°æ®åº“

---

## ğŸ› å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: å‰ç«¯ç¼“å­˜å¯¼è‡´ä½¿ç”¨æ—§ä»£ç 

**ç—‡çŠ¶**: 
- ç½‘ç»œè¯·æ±‚ä¸­æ²¡æœ‰ `solver_type` å­—æ®µ
- æˆ–è€… `solver_type` å€¼ä¸º `"speos"`

**è§£å†³æ–¹æ¡ˆ**:
```bash
1. æŒ‰ Ctrl+Shift+Rï¼ˆWindowsï¼‰æˆ– Cmd+Shift+Rï¼ˆMacï¼‰å¼ºåˆ¶åˆ·æ–°
2. æˆ–è€…æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼š
   - Chrome: Settings â†’ Privacy â†’ Clear browsing data â†’ Cached images and files
   - Firefox: Settings â†’ Privacy â†’ Clear Data â†’ Cached Web Content
3. é‡æ–°æ‰“å¼€é¡µé¢
```

---

### é—®é¢˜ 2: åç«¯æ²¡æœ‰æ­£ç¡®å¤„ç† `solver_type` å‚æ•°

**ç—‡çŠ¶**:
- å‰ç«¯è¯·æ±‚ä¸­æœ‰ `solver_type: "mechanical"`
- ä½†åç«¯æ—¥å¿—æ˜¾ç¤º `Solver: speos`

**è§£å†³æ–¹æ¡ˆ**:
æ£€æŸ¥åç«¯ä»£ç ï¼š
1. ç¡®è®¤åç«¯æ¥æ”¶ä»»åŠ¡æ—¶æ˜¯å¦æ­£ç¡®è¯»å–äº† `solver_type` å‚æ•°
2. ç¡®è®¤æ˜¯å¦æœ‰é»˜è®¤å€¼é€»è¾‘è¦†ç›–äº†æäº¤çš„å€¼

---

### é—®é¢˜ 3: åç«¯æ•°æ®åº“æ²¡æœ‰ä¿å­˜ `solver_type`

**ç—‡çŠ¶**:
- å‰ç«¯è¯·æ±‚æ­£ç¡®
- åç«¯æ—¥å¿—æ˜¾ç¤º `Solver: mechanical`
- ä½†ä»»åŠ¡åˆ—è¡¨ API è¿”å›çš„ `solver_type` ä¸º `null` æˆ– `"speos"`

**è§£å†³æ–¹æ¡ˆ**:
æ£€æŸ¥åç«¯ä»£ç ï¼š
1. ç¡®è®¤æ•°æ®åº“æ¨¡å‹ä¸­æ˜¯å¦æœ‰ `solver_type` å­—æ®µ
2. ç¡®è®¤åˆ›å»ºä»»åŠ¡æ—¶æ˜¯å¦ä¿å­˜äº† `solver_type`
3. ç¡®è®¤æŸ¥è¯¢ä»»åŠ¡æ—¶æ˜¯å¦è¿”å›äº† `solver_type`

---

## ğŸ“‹ å¿«é€Ÿè¯Šæ–­æ¸…å•

è¯·æŒ‰é¡ºåºæ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼Œå¹¶è®°å½•ç»“æœï¼š

```
â–¡ 1. æµè§ˆå™¨å·²å¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+Shift+Rï¼‰
â–¡ 2. å‰ç«¯æäº¤è¯·æ±‚ä¸­åŒ…å« solver_type: "mechanical"
â–¡ 3. åç«¯æ—¥å¿—æ˜¾ç¤º Received task - Solver: mechanical
â–¡ 4. ä»»åŠ¡åˆ—è¡¨ API è¿”å›çš„ä»»åŠ¡åŒ…å« solver_type: "mechanical"
â–¡ 5. å‰ç«¯æ­£ç¡®æ˜¾ç¤º ğŸ”§ Mechanical æ ‡ç­¾
```

**å¦‚æœç¬¬ 1-2 æ­¥å¤±è´¥** â†’ å‰ç«¯é—®é¢˜ï¼Œéœ€è¦æ¸…é™¤ç¼“å­˜æˆ–æ£€æŸ¥å‰ç«¯ä»£ç   
**å¦‚æœç¬¬ 3 æ­¥å¤±è´¥** â†’ åç«¯å‚æ•°è§£æé—®é¢˜  
**å¦‚æœç¬¬ 4 æ­¥å¤±è´¥** â†’ åç«¯æ•°æ®ä¿å­˜/è¿”å›é—®é¢˜  
**å¦‚æœç¬¬ 5 æ­¥å¤±è´¥** â†’ å‰ç«¯æ˜¾ç¤ºé€»è¾‘é—®é¢˜

---

## ğŸ”§ ä¸´æ—¶è°ƒè¯•æ–¹æ³•

å¦‚æœä½ æƒ³å¿«é€Ÿç¡®è®¤é—®é¢˜æ‰€åœ¨ï¼Œå¯ä»¥åœ¨å‰ç«¯æ·»åŠ è°ƒè¯•æ—¥å¿—ï¼š

### åœ¨ TasksTable.tsx ä¸­æ·»åŠ æ—¥å¿—

```typescript
// åœ¨ä»»åŠ¡åˆ—è¡¨æ¸²æŸ“å‰æ·»åŠ 
console.log('[Debug] ä»»åŠ¡æ•°æ®:', paginatedRows.map(task => ({
  task_id: task.task_id,
  job_name: task.job_name,
  solver_type: task.solver_type,  // â¬…ï¸ å…³é”®å­—æ®µ
})));
```

### åœ¨ UploadForm.tsx ä¸­æ·»åŠ æ—¥å¿—

```typescript
// åœ¨æäº¤æ—¶æ·»åŠ 
console.log('[Debug] æäº¤å‚æ•°:', {
  solver_type: solverType,  // â¬…ï¸ åº”è¯¥æ˜¯ "mechanical"
  job_name: jobName,
  thread_count: threadCount,
  job_key: jobKey,
});
```

---

## ğŸ¯ ç»“è®º

é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ åº”è¯¥èƒ½å¤Ÿå‡†ç¡®å®šä½é—®é¢˜å‡ºåœ¨ï¼š
1. **å‰ç«¯æäº¤ç¯èŠ‚** - æ²¡æœ‰æ­£ç¡®å‘é€ `solver_type`
2. **åç«¯æ¥æ”¶ç¯èŠ‚** - æ²¡æœ‰æ­£ç¡®è§£æ `solver_type`
3. **åç«¯å­˜å‚¨ç¯èŠ‚** - æ²¡æœ‰æ­£ç¡®ä¿å­˜ `solver_type`
4. **åç«¯è¿”å›ç¯èŠ‚** - æ²¡æœ‰æ­£ç¡®è¿”å› `solver_type`

è¯·æŒ‰ç…§è¯Šæ–­æ­¥éª¤é€ä¸€æ£€æŸ¥ï¼Œå¹¶å°†ç»“æœåé¦ˆï¼Œæˆ‘ä¼šå¸®ä½ è¿›ä¸€æ­¥å®šä½é—®é¢˜ã€‚

