# 📱 前端对接文档总览

## 👋 欢迎，前端团队！

感谢你们查看这份文档。后端已完成**多求解器架构升级**，现在支持 **4 种 ANSYS 求解器**。

本文档帮助你们快速了解变化并完成对接。

---

## 🎯 核心变化（30秒版本）

```
旧版：只支持 SPEOS 光学仿真
新版：支持 SPEOS + FLUENT + Maxwell + Mechanical

影响：需要添加求解器选择器和参数适配
兼容：现有代码可以继续使用（默认 SPEOS）
工作量：2-3 天
```

---

## 📚 文档索引

### 🔥 必读文档

| 文档 | 用途 | 阅读时间 |
|------|------|----------|
| [快速检查清单](./FRONTEND_QUICK_CHECKLIST.md) | 5分钟了解核心变化 | 5 分钟 |
| [API 接口参考](./API_REFERENCE_V2.md) | 完整的 API 变化说明 | 15 分钟 |
| [前端对接指南](./FRONTEND_INTEGRATION_GUIDE_V2.md) | 详细的技术实现指南 | 30 分钟 |

### 📖 选读文档

| 文档 | 用途 | 适合人群 |
|------|------|----------|
| [四求解器使用指南](./FOUR_SOLVERS_GUIDE.md) | 了解4种求解器的特点 | 产品经理、测试 |
| [架构设计文档](./MULTI_SOLVER_ARCHITECTURE.md) | 了解后端架构 | 技术负责人 |
| [环境配置指南](./ENV_CONFIG_FOUR_SOLVERS.md) | 了解后端配置 | DevOps |

---

## ⚡ 快速上手（3 步）

### Step 1: 了解变化（5 分钟）

阅读 [快速检查清单](./FRONTEND_QUICK_CHECKLIST.md)

核心变化：
- ⭐ 新增 `solver_type` 字段（可选，默认 "speos"）
- ⭐ 不同求解器有不同的参数
- ⭐ 进度信息根据求解器不同而不同

### Step 2: 查看 API 变化（10 分钟）

阅读 [API 接口参考](./API_REFERENCE_V2.md)

重点关注：
- 任务提交接口的新参数
- 任务详情接口的新字段
- TypeScript 类型定义

### Step 3: 实施修改（2-3 天）

参考 [前端对接指南](./FRONTEND_INTEGRATION_GUIDE_V2.md)

核心修改：
1. 添加 solver_type 选择器
2. 动态参数表单
3. 进度显示适配

---

## 🎨 前端修改优先级

### 🔥 高优先级（必须完成）

**预计时间**：1-2 天

- [ ] **任务提交表单**
  - 添加 solver_type 选择器
  - 根据 solver_type 显示不同参数
  - 提交时包含 solver_type 字段

- [ ] **TypeScript 类型定义**
  - 添加 SolverType 类型
  - 更新 ConfirmUploadRequest 接口
  - 更新 TaskDetail 接口

- [ ] **基本测试**
  - 测试 SPEOS 任务（向后兼容）
  - 测试 FLUENT 任务（新功能）

### 🟡 中优先级（建议完成）

**预计时间**：1 天

- [ ] **进度显示优化**
  - 根据 solver_type 显示不同进度
  - 适配 4 种求解器的进度格式

- [ ] **任务列表优化**
  - 显示 solver_type 标签
  - 添加求解器图标

### 🟢 低优先级（可选）

**预计时间**：1 天

- [ ] 求解器统计仪表板
- [ ] 求解器帮助文档
- [ ] UI/UX 优化

---

## 📋 完整的修改清单

### 需要修改的文件

| 文件 | 修改内容 | 优先级 |
|------|----------|--------|
| `types/api.ts` | 添加类型定义 | 🔥 高 |
| `TaskSubmitForm.tsx` | 添加求解器选择器和参数 | 🔥 高 |
| `TaskProgress.tsx` | 适配进度显示 | 🟡 中 |
| `TaskList.tsx` | 显示 solver_type | 🟡 中 |
| `TaskDetail.tsx` | 显示求解器信息 | 🟡 中 |

### 不需要修改的文件

- ✅ 任务列表查询逻辑（API 接口不变）
- ✅ 任务删除功能（API 接口不变）
- ✅ 文件下载功能（API 接口不变）
- ✅ 认证和权限（无变化）

---

## 🧪 测试环境

### 后端测试环境

```
URL: http://your-test-server:8000
API Docs: http://your-test-server:8000/docs

测试账号：（联系后端团队获取）
```

### 测试数据

**SPEOS 测试文件**：
- 文件格式：`.scdoc`, `.xmp`
- 测试任务：照明系统仿真

**FLUENT 测试文件**：
- 文件格式：`.cas`, `.cas.h5`
- 测试任务：机翼气动分析

**Maxwell 测试文件**：
- 文件格式：`.aedt`
- 测试任务：电机电磁分析

**Mechanical 测试文件**：
- 文件格式：`.dat`, `.inp`
- 测试任务：结构强度分析

---

## 📊 接口变化矩阵

| 接口 | 方法 | 变化类型 | 是否向后兼容 | 说明 |
|------|------|----------|--------------|------|
| `/api/tasks/upload/confirm` | POST | ⭐ 新增字段 | ✅ 是 | 添加 solver_type 和各求解器参数 |
| `/api/tasks/{id}/detail` | GET | ⭐ 新增字段 | ✅ 是 | 返回 solver_type 和 progress_info |
| `/api/tasks` | GET | ⭐ 新增字段 | ✅ 是 | 列表项包含 solver_type |
| `/api/tasks/upload/init` | POST | 无变化 | ✅ 是 | 保持不变 |
| `/api/tasks/upload/multipart/*` | POST | 无变化 | ✅ 是 | 保持不变 |
| `/api/tasks/{id}/download` | GET | 无变化 | ✅ 是 | 保持不变 |
| `/api/tasks/{id}` | DELETE | 无变化 | ✅ 是 | 保持不变 |

---

## ✅ 验收标准

### 功能验收

前端修改完成后，应满足以下标准：

- [ ] 可以选择 4 种求解器类型
- [ ] 每种求解器显示正确的参数表单
- [ ] 提交请求包含 solver_type 字段
- [ ] 任务列表显示 solver_type（可选）
- [ ] 进度显示根据 solver_type 适配（可选）
- [ ] 现有的 SPEOS 任务不受影响（向后兼容）

### 测试验收

- [ ] SPEOS 任务提交和查询正常
- [ ] FLUENT 任务提交和查询正常
- [ ] Maxwell 任务提交和查询正常
- [ ] Mechanical 任务提交和查询正常
- [ ] 不指定 solver_type 时默认使用 SPEOS

---

## 🎉 预期效果

### 用户体验

**修改前**：
```
用户只能提交 SPEOS 光学仿真任务
```

**修改后**：
```
用户可以选择：
💡 SPEOS - 光学仿真
🌊 FLUENT - 流体力学
⚡ Maxwell - 电磁场
🔧 Mechanical - 结构力学

每种求解器都有专门的参数和进度显示
```

### 业务价值

- ✅ 支持更多类型的仿真分析
- ✅ 统一的任务管理平台
- ✅ 更好的用户体验
- ✅ 更强的系统扩展性

---

## 📞 联系方式

### 开发支持

- **后端负责人**：Tony
- **技术支持**：随时联系后端团队
- **文档更新**：发现问题请及时反馈

### 协作方式

1. **问题反馈**：通过 Issue 或群组
2. **接口疑问**：直接联系后端团队
3. **测试协作**：预约联合测试时间

---

## 🚀 开始对接

### 推荐流程

```
Day 1 上午：阅读文档（3 个必读文档）
Day 1 下午：设计方案（UI/UX 设计）
Day 2：实施核心功能（solver_type 选择器、参数表单）
Day 3：实施进度显示和列表优化
Day 4：测试和 bug 修复
Day 5：联合测试和上线
```

### 第一步

📖 **请先阅读**：[快速检查清单](./FRONTEND_QUICK_CHECKLIST.md)（5分钟）

---

**祝对接顺利！** 🎉

如有任何问题，随时联系后端团队。我们会全力支持！

---

**文档创建日期**：2025-12-03  
**适用后端版本**：v2.1.0  
**前端建议开始时间**：本周内  
**预计完成时间**：下周

