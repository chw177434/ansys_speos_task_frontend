# ANSYS 远程异步求解平台 - 用户使用手册

## 📖 目录

1. [平台简介](#平台简介)
2. [快速开始](#快速开始)
3. [求解器选择](#求解器选择)
4. [提交任务](#提交任务)
5. [查看任务状态](#查看任务状态)
6. [下载结果文件](#下载结果文件)
7. [高级配置说明](#高级配置说明)
8. [各求解器详细说明](#各求解器详细说明)
9. [常见问题](#常见问题)

---

## 平台简介

本平台提供 ANSYS 求解器的远程异步计算服务，支持以下四种求解器：

- **💡 SPEOS** - 光学仿真（照明分析、光线追踪）
- **🌊 FLUENT** - 流体力学仿真（CFD 计算）
- **⚡ Maxwell** - 电磁场仿真（电机、变压器分析）
- **🔧 Mechanical** - 结构力学仿真（应力、振动分析）

### 主要功能

- ✅ 支持大文件上传（最大 5120 MB）
- ✅ 断点续传功能（网络中断后可继续上传）
- ✅ 实时查看任务执行进度
- ✅ 自动下载计算结果
- ✅ 任务历史记录管理

---

## 快速开始

### 第一步：选择求解器

1. 打开平台首页
2. 在求解器选择页面，点击您需要使用的求解器卡片
3. 系统会自动跳转到对应的任务提交页面

> 💡 **提示**：如果您之前使用过某个求解器，系统会显示"上次使用"的快捷入口，可直接点击进入。

### 第二步：填写任务信息

1. **任务名称**（必填）
   - 输入一个便于识别的任务名称
   - 例如："机翼应力分析"、"电机磁场仿真"等

2. **选择主文件**（必选）
   - 点击"选择文件"按钮
   - 根据求解器类型选择对应的文件格式（见下方说明）

3. **选择 Include 文件**（可选）
   - 如果您的项目需要额外的资源文件，请压缩后上传
   - 支持格式：`.zip`、`.rar`、`.7z`、`.tar`、`.gz`、`.tar.gz`
   - **推荐使用 `.zip` 格式**

### 第三步：提交任务

1. 确认所有信息填写正确
2. 点击"提交任务"按钮
3. 等待文件上传完成
4. 系统会自动开始执行计算任务

---

## 求解器选择

### 💡 SPEOS - 光学仿真

**适用场景：**
- 照明系统设计
- 光线追踪分析
- 传感器模拟
- 光学系统优化

**支持文件格式：**
- Master File：`.speos`、`.sv5` 文件

---

### 🌊 FLUENT - 流体力学仿真

**适用场景：**
- 流体流动分析
- 传热计算
- 多相流问题
- 湍流模拟

**支持文件格式：**
- Master File：`.cas`、`.cas.h5` 文件

---

### ⚡ Maxwell - 电磁场仿真

**适用场景：**
- 电机设计
- 变压器分析
- 天线优化
- 电磁兼容性分析

**支持文件格式：**
- Master File：`.aedt`、`.aedtz` 文件
- **强烈推荐使用 `.aedtz` 格式**（归档包，包含所有资源文件）

**⚠️ 重要提示：**
- 如果使用 `.aedt` 文件，需要同时上传对应的 `.aedb` 文件夹压缩包作为 Include 文件
- 使用 `.aedtz` 格式可以避免缺少资源文件的错误

---

### 🔧 Mechanical - 结构力学仿真

**适用场景：**
- 结构强度分析
- 应力计算
- 疲劳寿命预测
- 热-结构耦合分析

**支持文件格式：**
- Master File：`.dat`、`.inp` 文件

---

## 提交任务

### 基本操作流程

1. **填写任务名称**
   ```
   例如：机翼应力分析_20241201
   ```

2. **上传主文件（Master File）**
   - 点击"选择文件"按钮
   - 从本地选择对应的项目文件
   - 系统会显示已选择的文件名

3. **上传 Include 文件（可选）**
   - 如果项目需要额外的资源文件（如材料库、配置文件等）
   - 请将这些文件或文件夹压缩成 `.zip` 格式
   - 点击"选择文件"上传压缩包

   **压缩方法：**
   - **Windows**：右键文件夹 → "发送到" → "压缩(zipped)文件夹"
   - **Mac**：右键文件夹 → "压缩"

4. **设置输出目录（可选）**
   - 如果需要指定特定的输出目录，可以填写路径
   - 留空则使用系统默认的任务文件夹

5. **点击"提交任务"**
   - 系统会开始上传文件
   - 上传过程中可以查看进度
   - 上传完成后任务会自动开始执行

### 上传模式说明

平台支持两种上传模式：

#### 🚀 内网直连模式（推荐）

- **适用场景**：内网环境
- **特点**：
  - 文件直接上传到服务器，速度更快
  - 支持断点续传（网络中断后可继续）
  - 文件限制：5120 MB

#### ☁️ 云端存储模式

- **适用场景**：公网环境
- **特点**：
  - 文件上传到对象存储
  - 支持断点续传
  - 适合大文件上传

---

## 查看任务状态

### 任务列表功能

在任务提交页面的右侧，您可以查看所有已提交的任务：

#### 任务列表显示的信息

1. **任务名称**：您提交时填写的任务名称
2. **状态**：当前任务执行状态
   - 🟡 **等待中**：任务已创建，等待执行
   - 🔵 **运行中**：任务正在执行
   - 🟢 **成功**：任务执行完成
   - 🔴 **失败**：任务执行失败
3. **执行时长**：任务运行的时间
4. **提交时间**：任务提交的时间
5. **Task ID**：任务的唯一标识符
6. **结果文件**：可下载的结果文件链接

#### 任务状态说明

| 状态图标 | 状态名称 | 说明 |
|---------|---------|------|
| ⏳ | 等待中 | 任务已创建，等待系统分配资源执行 |
| 📥 | 下载中 | 正在从对象存储下载文件（TOS模式） |
| 🚀 | 启动中 | 任务已启动，正在初始化 |
| ▶️ | 运行中 | 任务正在执行计算 |
| ⚙️ | 执行中 | 任务执行中（带进度信息） |
| 🔄 | 重试中 | 任务正在重试执行 |
| ✅ | 成功 | 任务执行成功，可以下载结果 |
| ❌ | 失败 | 任务执行失败，可以查看错误信息 |
| ⛔ | 已取消 | 任务已被取消 |

#### 实时进度显示

对于运行中的任务，系统会实时显示：

- **执行进度百分比**：当前完成进度
- **剩余时间**：预计还需要多长时间完成
- **当前步骤**：正在执行的具体步骤
- **Pass/Sensor 信息**：迭代进度（SPEOS）
- **迭代步数**：当前迭代次数（FLUENT）
- **连续性残差**：收敛情况（FLUENT）

### 筛选和搜索

在任务列表顶部，您可以：

1. **搜索任务**：输入任务名称或 Task ID 进行搜索
2. **按状态筛选**：选择特定状态查看对应任务
3. **按求解器类型筛选**：只显示特定求解器的任务
4. **刷新列表**：点击刷新按钮获取最新状态

---

## 下载结果文件

### 下载方式

1. **自动显示**：任务执行成功后，结果文件会自动显示在任务列表中
2. **点击下载**：点击结果文件名即可下载
3. **多文件支持**：如果一个任务有多个结果文件，会全部列出

### 结果文件说明

- 结果文件通常以 `.zip` 格式提供
- 下载后解压即可查看计算结果
- 文件命名格式：`{任务名称}_{求解器类型}_{Task ID}.zip`

---

## 高级配置说明

### 何时使用高级配置

高级配置用于设置特殊的计算参数，**通常情况下不需要修改**。只有在以下情况才需要：

- 需要调整计算精度
- 需要设置特定的线程数或核心数
- 需要限制运行时间
- 需要使用 GPU 加速（SPEOS）

### 如何打开高级配置

1. 在任务提交表单底部，找到"高级配置"区域
2. 点击"展开"按钮
3. 根据需要修改参数
4. **重要**：只有您明确修改过的参数才会生效，未修改的参数将使用系统默认值

### 各求解器的高级参数

#### 💡 SPEOS 高级参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 使用 GPU 求解器 | 启用 GPU 加速计算 | 关闭 |
| Simulation 序号 | 指定要执行的仿真序号 | 自动 |
| 线程数 | 并行计算的线程数 | 自动 |
| 进程优先级 | 任务优先级（0-5） | 正常 |
| 光线/Pass 数 | 光线追踪的 Pass 数 | 使用默认 |
| 运行时长限制 | 最大运行时间（分钟） | 不限 |
| HPC Job 名称 | HPC 作业名称 | 可选 |
| HPC 节点数 | 使用的计算节点数 | 1 |
| HPC walltime | 最大运行时间（小时） | 可选 |

#### 🌊 FLUENT 高级参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 维度 | 2D 或 3D 模拟 | 需选择 |
| 精度 | 单精度或双精度 | 需选择 |
| 迭代步数 | 计算的迭代次数 | 需填写 |
| 初始化方法 | 标准或混合初始化 | 需选择 |
| 线程数 | 并行计算的线程数 | 需填写 |

**快速预设配置：**

平台提供了快速预设选项，可以一键设置常用配置：

- 🚀 **快速测试**：50步，单精度（适合快速验证）
- ⚙️ **标准计算**：300步，双精度（推荐用于一般计算）
- 🎯 **高精度计算**：1000步，双精度（适合高精度要求）
- ⏱️ **瞬态计算**：5000步，双精度（适合瞬态分析）

**参数建议：**
- 简单流动：100-200 步
- 复杂流动：500-1000 步
- 推荐使用双精度（dp）以获得更高精度

#### ⚡ Maxwell 高级参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 核心数 | 并行计算使用的核心数（1-32） | 需填写 |
| 设计名称 | 如果项目包含多个设计，指定要求解的设计 | 可选 |

**核心数说明：**
- 当前服务器 License 支持最大 32 核
- 推荐使用 32 核以充分利用 License 权限
- 如果留空，系统将使用默认值

#### 🔧 Mechanical 高级参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 核心数 | 并行计算的线程数 | 需填写 |
| 任务标识 | 用于文件命名的标识符 | 可选 |

**核心数建议：**
- 推荐值：8、16、32
- 根据计算规模和硬件资源选择

---

## 各求解器详细说明

### 💡 SPEOS 光学仿真

#### 文件准备

1. **Master File**（必选）
   - 文件格式：`.speos` 或 `.sv5`
   - 这是您的主项目文件

2. **Include 文件**（可选）
   - 如果项目引用了外部文件（如材料库、光源文件等）
   - 请将这些文件压缩成 `.zip` 格式上传

#### 提交步骤

1. 选择"SPEOS 光学仿真"
2. 填写任务名称
3. 上传 `.speos` 或 `.sv5` 文件
4. （可选）上传 Include 压缩包
5. 点击"提交任务"

#### 高级配置建议

- **GPU 加速**：如果您的项目支持 GPU，建议启用以加快计算速度
- **线程数**：通常使用默认值即可，系统会自动优化
- **光线数**：影响计算精度，数值越大精度越高但耗时越长

---

### 🌊 FLUENT 流体力学仿真

#### 文件准备

1. **Master File**（必选）
   - 文件格式：`.cas` 或 `.cas.h5`
   - 这是您的 FLUENT 案例文件

2. **Include 文件**（可选）
   - 如果案例文件引用了外部数据文件
   - 请压缩后上传

#### 提交步骤

1. 选择"FLUENT 流体力学仿真"
2. 填写任务名称
3. 上传 `.cas` 或 `.cas.h5` 文件
4. （可选）上传 Include 压缩包
5. 配置计算参数（建议使用快速预设）
6. 点击"提交任务"

#### 参数配置建议

**快速预设选择：**
- 首次测试：选择"快速测试"预设
- 正式计算：选择"标准计算"或"高精度计算"预设
- 瞬态分析：选择"瞬态计算"预设

**手动配置：**
- 维度：3D 计算更精确但耗时更长
- 精度：推荐使用双精度（dp）
- 迭代步数：
  - 简单流动：100-200 步
  - 复杂流动：500-1000 步
  - 瞬态分析：5000+ 步

---

### ⚡ Maxwell 电磁场仿真

#### 文件准备

1. **Master File**（必选）
   - **强烈推荐**：`.aedtz` 格式（归档包）
   - 也支持：`.aedt` 格式

2. **Include 文件**（如果使用 `.aedt` 格式）
   - 如果上传 `.aedt` 文件，必须同时上传对应的 `.aedb` 文件夹压缩包
   - 压缩方法：将 `.aedb` 文件夹压缩成 `.zip` 格式

#### 提交步骤

1. 选择"Maxwell 电磁场仿真"
2. 填写任务名称
3. **推荐**：上传 `.aedtz` 文件（包含所有资源）
   - 或：上传 `.aedt` 文件 + `.aedb` 压缩包
4. 配置核心数（推荐 32 核）
5. （可选）指定设计名称
6. 点击"提交任务"

#### 文件格式说明

**为什么推荐 `.aedtz` 格式？**

- `.aedtz` 是 ANSYS 的归档包格式，包含项目文件（`.aedt`）和所有资源文件夹（`.aedb`）
- 使用 `.aedtz` 可以避免"缺少 .aedb 文件夹"的错误
- 上传更方便，只需一个文件

**如果使用 `.aedt` 格式：**

1. 在 ANSYS Electronics Desktop 中打开项目
2. 找到项目目录下的 `.aedb` 文件夹
3. 将 `.aedb` 文件夹压缩成 `.zip` 格式
4. 上传 `.aedt` 文件作为 Master File
5. 上传 `.aedb.zip` 作为 Include 文件

---

### 🔧 Mechanical 结构力学仿真

#### 文件准备

1. **Master File**（必选）
   - 文件格式：`.dat` 或 `.inp`
   - 这是您的 ANSYS Mechanical 输入文件

2. **Include 文件**（可选）
   - 如果输入文件引用了外部文件（如材料数据、载荷文件等）
   - 请压缩后上传

#### 提交步骤

1. 选择"Mechanical 结构力学仿真"
2. 填写任务名称
3. 上传 `.dat` 或 `.inp` 文件
4. （可选）上传 Include 压缩包
5. 配置核心数（推荐 8、16 或 32）
6. （可选）填写任务标识（用于文件命名）
7. 点击"提交任务"

---

## 常见问题

### 文件上传相关

**Q: 文件上传失败怎么办？**

A: 
1. 检查文件大小是否超过 5120 MB 限制
2. 检查网络连接是否稳定
3. 如果使用内网直连模式，系统支持断点续传，可以重新上传
4. 如果问题持续，请联系管理员

**Q: Include 文件必须上传吗？**

A: 
- 不是必须的，只有在项目需要额外资源文件时才需要上传
- 如果您的项目文件是自包含的（如 `.aedtz`、`.cas.h5`），通常不需要 Include 文件

**Q: Include 文件支持哪些格式？**

A: 
- 支持：`.zip`、`.rar`、`.7z`、`.tar`、`.gz`、`.tar.gz`
- **强烈推荐使用 `.zip` 格式**，兼容性最好

**Q: 如何压缩文件夹？**

A: 
- **Windows**：右键文件夹 → "发送到" → "压缩(zipped)文件夹"
- **Mac**：右键文件夹 → "压缩"
- **Linux**：使用 `zip -r folder.zip folder/` 命令

### 任务执行相关

**Q: 任务一直显示"等待中"怎么办？**

A: 
- 这表示任务已创建，正在等待系统分配计算资源
- 如果等待时间过长，可能是系统负载较高，请耐心等待
- 可以点击"刷新"按钮查看最新状态

**Q: 任务执行失败怎么办？**

A: 
1. 检查上传的文件是否正确
2. 检查文件格式是否支持
3. 查看任务详情中的错误信息
4. 可以点击"🔄 重新执行"按钮重试任务

**Q: 如何查看任务执行进度？**

A: 
- 在任务列表中，运行中的任务会显示实时进度信息
- 包括：进度百分比、剩余时间、当前步骤等
- 系统会自动刷新，无需手动操作

**Q: 任务可以取消吗？**

A: 
- 目前不支持取消正在执行的任务
- 如果任务执行失败，可以删除任务后重新提交

### 结果下载相关

**Q: 任务完成后如何下载结果？**

A: 
- 任务执行成功后，结果文件会自动显示在任务列表中
- 点击文件名即可下载
- 结果文件通常以 `.zip` 格式提供

**Q: 结果文件包含什么内容？**

A: 
- 结果文件包含计算输出的所有文件
- 具体内容取决于您使用的求解器和项目配置
- 下载后解压即可查看

**Q: 可以下载部分结果吗？**

A: 
- 目前系统提供完整的结果文件包
- 如果任务有多个输出文件，会全部包含在压缩包中

### 高级配置相关

**Q: 高级配置必须填写吗？**

A: 
- 不是必须的，大多数情况下使用默认值即可
- 只有在需要特殊配置时才需要修改
- **重要**：只有您明确修改过的参数才会生效

**Q: 如果打开了高级配置但没有修改，会使用默认值吗？**

A: 
- **不会**。系统只会发送您明确修改过的参数
- 未修改的参数将使用后端系统的默认值
- 这样可以避免前端默认值覆盖后端默认值的问题

**Q: FLUENT 的快速预设如何使用？**

A: 
1. 打开高级配置
2. 在"快速预设"下拉框中选择一个预设
3. 系统会自动填充对应的参数
4. 您仍可以手动调整这些参数

### 界面操作相关

**Q: 如何快速找到我的任务？**

A: 
- 使用任务列表顶部的搜索框，输入任务名称或 Task ID
- 使用状态筛选，只显示特定状态的任务
- 使用求解器类型筛选，只显示特定求解器的任务

**Q: 任务列表可以排序吗？**

A: 
- 任务列表按提交时间倒序排列（最新的在前）
- 目前不支持自定义排序

**Q: 可以同时提交多个任务吗？**

A: 
- 可以，但建议根据系统负载情况合理提交
- 每个任务都会占用计算资源
- 建议等待前一个任务完成后再提交新任务

### 技术问题

**Q: 支持哪些浏览器？**

A: 
- 推荐使用 Chrome、Edge、Firefox 等现代浏览器
- 建议使用最新版本的浏览器以获得最佳体验

**Q: 移动端可以使用吗？**

A: 
- 平台支持移动端访问
- 但建议使用桌面端以获得更好的操作体验
- 移动端主要用于查看任务状态

**Q: 上传进度显示异常怎么办？**

A: 
- 刷新页面后重新上传
- 检查网络连接
- 如果使用内网直连模式，支持断点续传，可以继续上传

---

## 操作技巧

### 提高效率的技巧

1. **使用任务名称规范**
   - 建议使用有意义的任务名称，便于后续查找
   - 可以包含日期、项目编号等信息
   - 例如："机翼分析_20241201_v2"

2. **合理使用高级配置**
   - 首次提交建议使用默认值
   - 如果计算结果不理想，再调整高级参数
   - 使用 FLUENT 的快速预设可以快速配置常用参数

3. **文件准备**
   - 提前准备好所有文件
   - 确保文件格式正确
   - 对于 Maxwell，优先使用 `.aedtz` 格式

4. **任务管理**
   - 定期清理已完成的任务
   - 使用筛选功能快速找到需要的任务
   - 重要任务可以记录 Task ID 以便后续查找

### 最佳实践

1. **文件命名**
   - 使用清晰的文件名
   - 避免使用特殊字符
   - 建议使用英文或数字

2. **任务提交**
   - 提交前仔细检查文件是否正确
   - 确认任务名称填写正确
   - 对于重要任务，建议先做小规模测试

3. **结果管理**
   - 及时下载结果文件
   - 建议在本地备份重要结果
   - 任务完成后可以删除任务以节省空间

---

## 联系支持

如果您在使用过程中遇到问题：

1. 首先查看本手册的"常见问题"部分
2. 检查任务详情中的错误信息
3. 联系系统管理员获取技术支持

---

## 版本信息

- **平台版本**：v2.1.0
- **最后更新**：2024年12月
- **文档版本**：1.0

---

**祝您使用愉快！** 🎉

