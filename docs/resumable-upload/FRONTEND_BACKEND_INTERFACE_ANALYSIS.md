# Direct æ¨¡å¼æ–­ç‚¹ç»­ä¼  - å‰åç«¯æ¥å£ä¸€è‡´æ€§åˆ†æ

## ğŸ“‹ å®Œæ•´æµç¨‹åˆ†æ

### å½“å‰å‰ç«¯æµç¨‹ï¼ˆDirect æ¨¡å¼æ–­ç‚¹ç»­ä¼ ï¼‰

```
1. ç”¨æˆ·é€‰æ‹©æ–‡ä»¶ï¼ˆmaster + includeï¼‰
   â†“
2. æ£€æŸ¥ localStorage ä¸­æ˜¯å¦æœ‰æœªå®Œæˆçš„ä¸Šä¼ 
   â†“
3. ä¸Šä¼  Master æ–‡ä»¶ï¼ˆåˆ†ç‰‡ï¼‰
   - è°ƒç”¨: initDirectMultipartUpload
   - è¿”å›: task_id (master), upload_id, file_path
   â†“
4. ä¸Šä¼  Include æ–‡ä»¶ï¼ˆåˆ†ç‰‡ï¼Œå¦‚æœæœ‰ï¼‰
   - è°ƒç”¨: initDirectMultipartUpload (ä¼ é€’ master çš„ task_id)
   - è¿”å›: task_id (include), upload_id, file_path
   â†“
5. æäº¤ä»»åŠ¡
   - è°ƒç”¨: submitDirectUpload (æ–¹å¼2: åŸºäºå·²ä¸Šä¼ æ–‡ä»¶)
   - ä¼ é€’: task_id (ä½¿ç”¨ master çš„ task_id)
   - åç«¯: æŸ¥æ‰¾æ–‡ä»¶å¹¶è§£å‹ include
```

---

## ğŸ” å‘ç°çš„é—®é¢˜

### é—®é¢˜ 1: task_id å‚æ•°æ”¯æŒä¸æ˜ç¡®

**å‰ç«¯å®ç°**ï¼š
- `DirectMultipartInitRequest` æ¥å£å·²æ·»åŠ  `task_id?: string` å‚æ•°
- `DirectResumableUploadManager` åœ¨åˆå§‹åŒ–æ—¶ä¼šä¼ é€’ `task_id`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰

**åç«¯éœ€è¦ç¡®è®¤**ï¼š
- âœ… `/api/upload/direct/multipart/init` æ¥å£æ˜¯å¦æ”¯æŒ `task_id` å‚æ•°ï¼Ÿ
- âœ… å¦‚æœæ”¯æŒï¼Œä¼ é€’ `task_id` æ—¶ï¼Œæ˜¯å¦ä½¿ç”¨è¯¥ `task_id` è€Œä¸æ˜¯åˆ›å»ºæ–°çš„ï¼Ÿ
- âœ… å¦‚æœä¸æ”¯æŒï¼Œåç«¯ä¼šå¦‚ä½•å¤„ç†ï¼Ÿæ˜¯å¦å¿½ç•¥è¯¥å‚æ•°ï¼Ÿ

**å½“å‰è¡Œä¸º**ï¼š
- å‰ç«¯ä¼ é€’äº† `task_id`ï¼Œä½†åç«¯å¯èƒ½è¿”å›äº†ä¸åŒçš„ `task_id`
- è¿™è¯´æ˜åç«¯å¯èƒ½ä¸æ”¯æŒè¯¥å‚æ•°ï¼Œæˆ–è€…é€»è¾‘æœ‰é—®é¢˜

---

### é—®é¢˜ 2: æ–‡ä»¶å­˜å‚¨ä½ç½®ä¸ä¸€è‡´

**åç«¯æ—¥å¿—æ˜¾ç¤º**ï¼š
```
Master æ–‡ä»¶: /home/hongwei/speos_data/inputs/84cbb673-390b-4cab-8254-5364ac8b0708/SPEOS_input_files_2_.zip
æäº¤ä»»åŠ¡æ—¶æŸ¥æ‰¾: /home/hongwei/speos_data/inputs/aed27a97-cfef-4b99-974f-d3b7dce677b6/
```

**é—®é¢˜**ï¼š
- Master æ–‡ä»¶å­˜å‚¨åœ¨ `task_id = 84cbb673-390b-4cab-8254-5364ac8b0708` ç›®å½•
- æäº¤ä»»åŠ¡æ—¶ä½¿ç”¨ `task_id = aed27a97-cfef-4b99-974f-d3b7dce677b6`
- ä¸¤ä¸ª task_id ä¸ä¸€è‡´ï¼Œå¯¼è‡´æ‰¾ä¸åˆ°æ–‡ä»¶

**åç«¯å·²å®ç°è·¨ç›®å½•æŸ¥æ‰¾**ï¼š
- åç«¯ä¼šåœ¨å…¶ä»–ç›®å½•ä¸­æŸ¥æ‰¾æœ€è¿‘ 5 åˆ†é’Ÿå†…ä¸Šä¼ çš„æ–‡ä»¶
- ä½†è¿™ä¸æ˜¯æœ€ä½³å®è·µï¼Œåº”è¯¥ç¡®ä¿ task_id ä¸€è‡´

---

### é—®é¢˜ 3: submit-direct æ¥å£å‚æ•°ç¡®è®¤

**å‰ç«¯å®ç°ï¼ˆæ–¹å¼2ï¼‰**ï¼š
```typescript
{
  task_id: "master-task-id",
  profile_name: "...",
  version: "...",
  job_name: "...",
  // ... å…¶ä»–å‚æ•°
  // ä¸ä¼ é€’ master_file å’Œ include_file
}
```

**åç«¯éœ€è¦ç¡®è®¤**ï¼š
- âœ… å½“ä¼ é€’ `task_id` æ—¶ï¼Œæ˜¯å¦å¿…é¡»ä¸ä¼ é€’ `master_file` å’Œ `include_file`ï¼Ÿ
- âœ… åç«¯æŸ¥æ‰¾æ–‡ä»¶çš„é€»è¾‘ï¼š
  - Master æ–‡ä»¶æŸ¥æ‰¾ä½ç½®ï¼š`{INPUT_DIR}/{task_id}/` æˆ– `{TMP_DIR}/{task_id}/`
  - Include å‹ç¼©åŒ…æŸ¥æ‰¾ä½ç½®ï¼š`{TMP_DIR}/{task_id}/` æˆ– `{INPUT_DIR}/{task_id}/_tmp`
- âœ… å¦‚æœæ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œé”™è¯¯ä¿¡æ¯æ˜¯ä»€ä¹ˆï¼Ÿ

---

## ğŸ“¡ æ¥å£è§„èŒƒï¼ˆéœ€è¦å‰åç«¯ä¸€è‡´ï¼‰

### 1. åˆå§‹åŒ–åˆ†ç‰‡ä¸Šä¼ 

**æ¥å£**: `POST /api/upload/direct/multipart/init`

**å‰ç«¯è¯·æ±‚**:
```typescript
{
  filename: string;
  file_size: number;
  file_type: "master" | "include";
  chunk_size?: number;
  task_id?: string;  // âš ï¸ éœ€è¦åç«¯ç¡®è®¤æ˜¯å¦æ”¯æŒ
}
```

**åç«¯éœ€è¦ç¡®è®¤**:
- [ ] æ˜¯å¦æ”¯æŒ `task_id` å‚æ•°ï¼Ÿ
- [ ] å¦‚æœæ”¯æŒï¼Œä¼ é€’ `task_id` æ—¶çš„è¡Œä¸ºï¼š
  - ä½¿ç”¨è¯¥ `task_id` è¿˜æ˜¯åˆ›å»ºæ–°çš„ï¼Ÿ
  - å¦‚æœè¯¥ `task_id` å·²å­˜åœ¨ï¼Œæ˜¯å¦å¤ç”¨ï¼Ÿ
- [ ] å¦‚æœä¸æ”¯æŒï¼Œæ˜¯å¦å¿½ç•¥è¯¥å‚æ•°ï¼Ÿ

**åç«¯å“åº”**:
```typescript
{
  task_id: string;  // âš ï¸ å¦‚æœä¼ é€’äº† task_idï¼Œè¿”å›çš„åº”è¯¥ä¸ä¼ é€’çš„ä¸€è‡´
  upload_id: string;
  total_chunks: number;
  parts: Array<{...}>;
}
```

---

### 2. å®Œæˆåˆ†ç‰‡ä¸Šä¼ 

**æ¥å£**: `POST /api/upload/direct/multipart/complete`

**å‰ç«¯è¯·æ±‚**:
```typescript
{
  task_id: string;
  upload_id: string;
  filename: string;
  file_type: "master" | "include";
  parts: Array<{ part_number: number }>;
}
```

**åç«¯å“åº”**:
```typescript
{
  message: string;
  file_path: string;  // âš ï¸ æ–‡ä»¶å­˜å‚¨çš„å®Œæ•´è·¯å¾„
}
```

**åç«¯éœ€è¦ç¡®è®¤**:
- [ ] æ–‡ä»¶å­˜å‚¨ä½ç½®è§„åˆ™ï¼š
  - Master æ–‡ä»¶ï¼š`{INPUT_DIR}/{task_id}/{filename}` æˆ– `{TMP_DIR}/{task_id}/{filename}`ï¼Ÿ
  - Include æ–‡ä»¶ï¼š`{TMP_DIR}/{task_id}/{filename}` æˆ– `{INPUT_DIR}/{task_id}/_tmp/{filename}`ï¼Ÿ
- [ ] å¦‚æœ `task_id` ä¸åŒï¼Œæ–‡ä»¶ä¼šå­˜å‚¨åœ¨å“ªé‡Œï¼Ÿ

---

### 3. æäº¤ä»»åŠ¡ï¼ˆæ–¹å¼2ï¼šåŸºäºå·²ä¸Šä¼ æ–‡ä»¶ï¼‰

**æ¥å£**: `POST /api/tasks/submit-direct`

**å‰ç«¯è¯·æ±‚ï¼ˆæ–¹å¼2ï¼‰**:
```typescript
FormData {
  task_id: string;  // âš ï¸ Master æ–‡ä»¶çš„ task_id
  profile_name: string;
  version: string;
  job_name: string;
  // ... å…¶ä»–å‚æ•°
  // ä¸åŒ…å« master_file å’Œ include_file
}
```

**åç«¯éœ€è¦ç¡®è®¤**:
- [ ] æ–‡ä»¶æŸ¥æ‰¾é€»è¾‘ï¼š
  1. Master æ–‡ä»¶æŸ¥æ‰¾é¡ºåºï¼š
     - `{INPUT_DIR}/{task_id}/` ç›®å½•ä¸‹çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Ÿ
     - `{TMP_DIR}/{task_id}/` ç›®å½•ä¸‹çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Ÿ
     - å¦‚ä½•è¯†åˆ« master æ–‡ä»¶ï¼Ÿ
  
  2. Include å‹ç¼©åŒ…æŸ¥æ‰¾é¡ºåºï¼š
     - `{TMP_DIR}/{task_id}/` ç›®å½•ä¸‹æŸ¥æ‰¾ `.zip`, `.rar`, `.7z` ç­‰ï¼Ÿ
     - `{INPUT_DIR}/{task_id}/_tmp/` ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Ÿ
     - `{INPUT_DIR}/{task_id}/` ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Ÿ
     - å¦‚æœ task_id ä¸ä¸€è‡´ï¼Œè·¨ç›®å½•æŸ¥æ‰¾çš„èŒƒå›´æ˜¯ä»€ä¹ˆï¼Ÿ
  
  3. è·¨ç›®å½•æŸ¥æ‰¾é€»è¾‘ï¼š
     - æŸ¥æ‰¾æœ€è¿‘ 5 åˆ†é’Ÿå†…ä¸Šä¼ çš„æ–‡ä»¶ï¼Ÿ
     - æŸ¥æ‰¾èŒƒå›´ï¼šæ•´ä¸ª `INPUT_DIR` è¿˜æ˜¯åªæŸ¥æ‰¾ `TMP_DIR`ï¼Ÿ
     - å¦‚ä½•åŒ¹é…æ–‡ä»¶ï¼Ÿé€šè¿‡æ–‡ä»¶åã€å¤§å°ã€è¿˜æ˜¯æ—¶é—´æˆ³ï¼Ÿ

- [ ] å¦‚æœæ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œé”™è¯¯ä¿¡æ¯æ˜¯ä»€ä¹ˆï¼Ÿ
- [ ] Include æ–‡ä»¶è§£å‹ä½ç½®ï¼š
  - è§£å‹åˆ° `{INPUT_DIR}/{task_id}/` ç›®å½•ï¼Ÿ
  - æ˜¯å¦è·³è¿‡ä¸ master æ–‡ä»¶åŒåçš„æ–‡ä»¶ï¼Ÿ

---

## âœ… å‰ç«¯å½“å‰å®ç°çŠ¶æ€

### å·²å®ç°çš„åŠŸèƒ½

1. âœ… æ–­ç‚¹ç»­ä¼ æ”¯æŒï¼ˆlocalStorage ä¿å­˜è¿›åº¦ï¼‰
2. âœ… åˆ†ç‰‡ä¸Šä¼ ï¼ˆè‡ªåŠ¨åˆ†ç‰‡ï¼Œæ”¯æŒå¤§æ–‡ä»¶ï¼‰
3. âœ… è¿›åº¦ç›‘æ§ï¼ˆå®æ—¶æ˜¾ç¤ºä¸Šä¼ è¿›åº¦ã€é€Ÿåº¦ã€å‰©ä½™æ—¶é—´ï¼‰
4. âœ… é”™è¯¯å¤„ç†ï¼ˆè¯¦ç»†çš„é”™è¯¯æ—¥å¿—å’Œç”¨æˆ·æç¤ºï¼‰
5. âœ… å–æ¶ˆä¸Šä¼ ï¼ˆæ”¯æŒ AbortControllerï¼‰
6. âœ… Include æ–‡ä»¶å¼ºåˆ¶ä½¿ç”¨ master çš„ task_idï¼ˆå¦‚æœ master å·²ä¸Šä¼ ï¼‰

### å¾…ç¡®è®¤çš„é—®é¢˜

1. âš ï¸ åç«¯æ˜¯å¦æ”¯æŒ `task_id` å‚æ•°ï¼ˆåœ¨ init æ¥å£ä¸­ï¼‰ï¼Ÿ
2. âš ï¸ å¦‚æœåç«¯ä¸æ”¯æŒï¼Œå‰ç«¯å¦‚ä½•å¤„ç†ï¼Ÿ
3. âš ï¸ æ–‡ä»¶å­˜å‚¨ä½ç½®è§„åˆ™æ˜¯å¦ä¸åç«¯ä¸€è‡´ï¼Ÿ
4. âš ï¸ è·¨ç›®å½•æŸ¥æ‰¾é€»è¾‘æ˜¯å¦å¯é ï¼Ÿ

---

## âœ… åç«¯å›ç­”ï¼ˆ2025-11-14ï¼‰

### 1. æ¥å£å‚æ•°æ”¯æŒç¡®è®¤

**é—®é¢˜ A**: `/api/upload/direct/multipart/init` æ¥å£æ˜¯å¦æ”¯æŒ `task_id` å‚æ•°ï¼Ÿ

**ç­”æ¡ˆ**: âœ… **å®Œå…¨æ”¯æŒ**

- âœ… **æ”¯æŒ**ï¼šå¦‚æœä¼ é€’ `task_id`ï¼Œ**ç›´æ¥ä½¿ç”¨è¯¥ task_id**ï¼ˆä¸åˆ›å»ºæ–°çš„ï¼‰
- âœ… å¦‚æœä¸ä¼ é€’ `task_id`ï¼Œåˆ›å»ºæ–°çš„ UUID
- âœ… è¿”å›çš„ `task_id` **ä¸ä¼ é€’çš„å®Œå…¨ä¸€è‡´**

**ä»£ç å®ç°**ï¼ˆ`app/routers/upload.py:228-231`ï¼‰:
```python
if request.task_id:
    task_id = request.task_id  # ä½¿ç”¨ä¼ é€’çš„ task_id
else:
    task_id = str(uuid.uuid4())  # åˆ›å»ºæ–°çš„ task_id
```

**é—®é¢˜ B**: å¦‚æœæ”¯æŒ `task_id` å‚æ•°ï¼Œinclude æ–‡ä»¶ä¼ é€’ master çš„ `task_id` æ—¶ï¼š

**ç­”æ¡ˆ**: âœ… **å®Œå…¨æ”¯æŒ**

- âœ… **å…è®¸**åŒä¸€ä¸ª `task_id` ä¸‹æœ‰å¤šä¸ªæ–‡ä»¶ï¼ˆmaster + includeï¼‰
- âœ… é€šè¿‡ `file_type` å‚æ•°åŒºåˆ†ï¼ˆ`"master"` æˆ– `"include"`ï¼‰
- âœ… æ‰€æœ‰æ–‡ä»¶å­˜å‚¨åœ¨ `{INPUT_DIR}/{task_id}/` ç›®å½•

---

### 2. æ–‡ä»¶å­˜å‚¨ä½ç½®è§„åˆ™

**åç«¯æ˜ç¡®è¯´æ˜**ï¼š

**Master æ–‡ä»¶å­˜å‚¨ä½ç½®**ï¼š
```
âœ… è§„åˆ™: {INPUT_DIR}/{task_id}/{filename}
```

**Include æ–‡ä»¶å­˜å‚¨ä½ç½®**ï¼š
```
âœ… è§„åˆ™: {INPUT_DIR}/{task_id}/{filename}  ï¼ˆä¸ master æ–‡ä»¶ç›¸åŒç›®å½•ï¼‰
```

**å®é™…å­˜å‚¨ä½ç½®**ï¼ˆå·²ç¡®è®¤ï¼‰ï¼š
- Master: `{INPUT_DIR}/{task_id}/{filename}` âœ…
- Include: `{INPUT_DIR}/{task_id}/{filename}` âœ…
- ç¤ºä¾‹: `/home/hongwei/speos_data/inputs/84cbb673-390b-4cab-8254-5364ac8b0708/SPEOS_input_files_2_.zip`

---

### 3. submit-direct æ¥å£ï¼ˆæ–¹å¼2ï¼‰æ–‡ä»¶æŸ¥æ‰¾é€»è¾‘

**åç«¯æ˜ç¡®è¯´æ˜**ï¼š

**Master æ–‡ä»¶æŸ¥æ‰¾**ï¼š
1. âœ… **ç¬¬ä¸€ä¼˜å…ˆçº§**: `{INPUT_DIR}/{task_id}/` ç›®å½•ï¼ˆæŸ¥æ‰¾æ‰€æœ‰æ–‡ä»¶ï¼Œæ’é™¤éšè—æ–‡ä»¶ï¼‰
2. âœ… **ç¬¬äºŒä¼˜å…ˆçº§**: `{INPUT_DIR}/{task_id}/_tmp/` ç›®å½•
3. âœ… **è¯†åˆ«è§„åˆ™**: ä½¿ç”¨ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„æ–‡ä»¶ä½œä¸º master æ–‡ä»¶
4. âœ… **é”™è¯¯å¤„ç†**: å¦‚æœéƒ½æ‰¾ä¸åˆ°ï¼Œè¿”å› 404 é”™è¯¯

**Include å‹ç¼©åŒ…æŸ¥æ‰¾**ï¼š
1. âœ… **æŸ¥æ‰¾é¡ºåº**:
   - ç¬¬ä¸€ä¼˜å…ˆçº§: `{INPUT_DIR}/{task_id}/_tmp/`
   - ç¬¬äºŒä¼˜å…ˆçº§: `{INPUT_DIR}/{task_id}/`
   - ç¬¬ä¸‰ä¼˜å…ˆçº§: `{TMP_DIR}/{task_id}/`
2. âœ… **æ”¯æŒçš„æ ¼å¼**: `.zip`, `.rar`, `.7z`, `.tar`, `.gz`, `.tar.gz`
3. âœ… **è·¨ç›®å½•æŸ¥æ‰¾**: å¦‚æœå½“å‰ task_id ç›®å½•ä¸­æ²¡æ‰¾åˆ°ï¼Œåœ¨ `{INPUT_DIR}/` ä¸‹æŸ¥æ‰¾æœ€è¿‘ 5 åˆ†é’Ÿå†…ä¸Šä¼ çš„æ–‡ä»¶
4. âœ… **æ—¶é—´çª—å£**: 5 åˆ†é’Ÿï¼ˆ300 ç§’ï¼‰

**é”™è¯¯å¤„ç†**ï¼š
- âœ… **Master æ–‡ä»¶**: å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å› 404 é”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯: `"Master file not found for task_id {task_id}. Please ensure files are uploaded first."`
- âœ… **Include æ–‡ä»¶**: å¦‚æœæ‰¾ä¸åˆ°ï¼Œ**ç»§ç»­å¤„ç†**ï¼ˆä¸æŠ¥é”™ï¼‰ï¼Œè®°å½•æ—¥å¿—

---

### 4. æµ‹è¯•å»ºè®®

è¯·åç«¯é…åˆæµ‹è¯•ä»¥ä¸‹åœºæ™¯ï¼š

**åœºæ™¯ 1**: task_id ä¸€è‡´
- Master æ–‡ä»¶ä¸Šä¼ åˆ° `task_id = A`
- Include æ–‡ä»¶ä¸Šä¼ åˆ° `task_id = A`ï¼ˆä¼ é€’ `task_id = A`ï¼‰
- æäº¤ä»»åŠ¡æ—¶ä½¿ç”¨ `task_id = A`
- âœ… åº”è¯¥èƒ½æ‰¾åˆ°æ‰€æœ‰æ–‡ä»¶

**åœºæ™¯ 2**: task_id ä¸ä¸€è‡´ï¼ˆå½“å‰é—®é¢˜ï¼‰
- Master æ–‡ä»¶ä¸Šä¼ åˆ° `task_id = A`
- Include æ–‡ä»¶ä¸Šä¼ åˆ° `task_id = B`ï¼ˆåç«¯åˆ›å»ºäº†æ–°çš„ï¼‰
- æäº¤ä»»åŠ¡æ—¶ä½¿ç”¨ `task_id = A`
- âš ï¸ åç«¯åº”è¯¥é€šè¿‡è·¨ç›®å½•æŸ¥æ‰¾æ‰¾åˆ° include æ–‡ä»¶

**åœºæ™¯ 3**: åªæœ‰ master æ–‡ä»¶
- Master æ–‡ä»¶ä¸Šä¼ åˆ° `task_id = A`
- æ²¡æœ‰ include æ–‡ä»¶
- æäº¤ä»»åŠ¡æ—¶ä½¿ç”¨ `task_id = A`
- âœ… åº”è¯¥èƒ½æ­£å¸¸åˆ›å»ºä»»åŠ¡

---

## ğŸ¯ æ¨èçš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: åç«¯æ”¯æŒ task_id å‚æ•°ï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- ç¡®ä¿ task_id ä¸€è‡´
- æ–‡ä»¶éƒ½åœ¨åŒä¸€ç›®å½•
- é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤

**å®ç°**ï¼š
1. åç«¯ `/api/upload/direct/multipart/init` æ¥å£æ”¯æŒ `task_id` å‚æ•°
2. å¦‚æœä¼ é€’ `task_id`ï¼Œä½¿ç”¨è¯¥ `task_id`ï¼ˆä¸åˆ›å»ºæ–°çš„ï¼‰
3. å‰ç«¯ include æ–‡ä»¶ä¸Šä¼ æ—¶ä¼ é€’ master çš„ `task_id`

### æ–¹æ¡ˆ 2: åç«¯ä¸æ”¯æŒ task_id å‚æ•°ï¼ˆå½“å‰æƒ…å†µï¼‰

**ä¼˜ç‚¹**ï¼š
- ä¸éœ€è¦ä¿®æ”¹åç«¯æ¥å£
- åç«¯å·²æœ‰è·¨ç›®å½•æŸ¥æ‰¾é€»è¾‘

**ç¼ºç‚¹**ï¼š
- task_id ä¸ä¸€è‡´ï¼Œéœ€è¦è·¨ç›®å½•æŸ¥æ‰¾
- é€»è¾‘å¤æ‚ï¼Œå¯èƒ½å‡ºé”™

**å®ç°**ï¼š
1. å‰ç«¯æ¥å— task_id ä¸ä¸€è‡´çš„æƒ…å†µ
2. æäº¤ä»»åŠ¡æ—¶ä½¿ç”¨ master çš„ `task_id`
3. åç«¯é€šè¿‡è·¨ç›®å½•æŸ¥æ‰¾æ‰¾åˆ° include æ–‡ä»¶

---

## ğŸ“ æ€»ç»“

### âœ… å‰ç«¯å½“å‰çŠ¶æ€
- âœ… ä»£ç å®ç°å®Œæ•´
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… åç«¯æ¥å£å®Œå…¨æ”¯æŒ

### âœ… åç«¯ç¡®è®¤ï¼ˆå·²å®Œæˆï¼‰
1. âœ… **`task_id` å‚æ•°æ”¯æŒ**ï¼šå®Œå…¨æ”¯æŒï¼Œä¼ é€’æ—¶ç›´æ¥ä½¿ç”¨ï¼Œä¸åˆ›å»ºæ–°çš„
2. âœ… **æ–‡ä»¶å­˜å‚¨ä½ç½®**ï¼šæ˜ç¡®çš„å­˜å‚¨è§„åˆ™ï¼ˆ`{INPUT_DIR}/{task_id}/{filename}`ï¼‰
3. âœ… **æ–‡ä»¶æŸ¥æ‰¾é€»è¾‘**ï¼šè¯¦ç»†çš„æŸ¥æ‰¾é¡ºåºå’Œè§„åˆ™ï¼ˆåŒ…å«å®¹é”™æœºåˆ¶ï¼‰
4. âœ… **é”™è¯¯å¤„ç†**ï¼šæ˜ç¡®çš„é”™è¯¯ä¿¡æ¯å’Œå¤„ç†é€»è¾‘

### âœ… å‰åç«¯ä¸€è‡´æ€§
- âœ… **æ¥å£å‚æ•°**: å®Œå…¨ä¸€è‡´
- âœ… **æ–‡ä»¶å­˜å‚¨**: å®Œå…¨ä¸€è‡´
- âœ… **æ–‡ä»¶æŸ¥æ‰¾**: åç«¯æ›´å®Œå–„ï¼ˆåŒ…å«å®¹é”™æœºåˆ¶ï¼‰

### ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨
1. âœ… åç«¯å·²æ˜ç¡®å›ç­”æ‰€æœ‰é—®é¢˜
2. âœ… å‰ç«¯ä»£ç æ— éœ€è°ƒæ•´ï¼ˆå·²ç¬¦åˆåç«¯æ¥å£ï¼‰
3. âš ï¸ **å‰ç«¯éœ€è¦ç¡®ä¿ä½¿ç”¨ç›¸åŒçš„ task_id**ï¼ˆæœ€ä½³å®è·µï¼‰
4. âœ… è¿›è¡Œå®Œæ•´æµ‹è¯•ï¼Œç¡®ä¿æ‰€æœ‰åœºæ™¯æ­£å¸¸å·¥ä½œ

### ğŸ“š è¯¦ç»†æ–‡æ¡£
- åç«¯å®Œæ•´å›ç­”: `BACKEND_ANSWERS_AND_OPTIMIZATION.md`
- æ¥å£è§„èŒƒ: `ã€ç»™å‰ç«¯ã€‘æ–­ç‚¹ç»­ä¼ æ¥å£è§„èŒƒ.md`

---

**æœ€åæ›´æ–°**: 2025-11-14  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0

